/*
 * File:                    main.c
 * Author:                  Daniel Martinez
 *                          dagmtzs@gmail.com
 * Date:                    Fri Feb 16 01:12:47 AM CST 2024
 * Target:                  ATmega328P
 * Description:             This is a template for ATmega328P programs written in C
 */

/*********************************************************************************************************************************
 *          << Area for macro definitions >>
 ********************************************************************************************************************************/
#define F_CPU 16000000U

/*********************************************************************************************************************************
 *          << Area for includes >>
 ********************************************************************************************************************************/
#include <avr/io.h>
#include <avr/interrupt.h>

/*********************************************************************************************************************************
 *          << Main function >>
 ********************************************************************************************************************************/
int main()
{	
    TCCR0A = 0;
    TCCR0B = 0x04;

    TIMSK0 |= _BV(TOIE0);
    
    sei();

    DDRD |= _BV(PORTD7) | _BV(PORTD6);
    DDRD &= ~_BV(PORTD2);
    PORTD |= _BV(PORTD2);
    
    // Enter an infinite loop
	while (1)
	{
        if(~PIND2 & _BV(PORTD2)){
            PORTD |= _BV(PORTD6);
        }
        else
        {
            PORTD &= ~_BV(PORTD6);
        }
    }
}

ISR(TIMER0_OVF_vect)
{
    PORTD ^= _BV(PORTD7);
}
